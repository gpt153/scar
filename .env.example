# Database
DATABASE_URL=postgresql://postgres:postgres@localhost:5432/remote_coding_agent

# AI Assistants
# Claude - Choose one:
CLAUDE_CODE_OAUTH_TOKEN=sk-ant-oat01-...
# OR
# CLAUDE_API_KEY=sk-ant-...

# Codex Authentication (get from ~/.codex/auth.json after running 'codex login')
# Required if using Codex as AI assistant
# On Linux/Mac: cat ~/.codex/auth.json
# On Windows: type %USERPROFILE%\.codex\auth.json
CODEX_ID_TOKEN=eyJ...
CODEX_ACCESS_TOKEN=eyJ...
CODEX_REFRESH_TOKEN=rt_...
CODEX_ACCOUNT_ID=6a6a7ba6-...

# Default AI Assistant (claude | codex)
# Used for new conversations when no codebase specified
DEFAULT_AI_ASSISTANT=claude

# GitHub Token (for GitHub CLI and commands)
GH_TOKEN=ghp_...
GITHUB_TOKEN=ghp_...  # Same as GH_TOKEN, used by adapter

# GitHub Owner (for repository creation via /new-topic command)
# Your GitHub username - used when creating private repositories automatically
GITHUB_OWNER=your-github-username

# GitHub Webhooks
WEBHOOK_SECRET=your_random_secret_string

# GitHub User Whitelist (optional - comma-separated usernames)
# When set, only listed GitHub users can trigger webhook processing
# When empty/unset, webhooks are processed for all users
# Usernames are case-insensitive (octocat == Octocat)
GITHUB_ALLOWED_USERS=octocat,monalisa

# Platforms - set the tokens for the ones you want to use
# Telegram - <get token from @BotFather>
TELEGRAM_BOT_TOKEN=
# Discord - <get token from Discord Developer Portal>
DISCORD_BOT_TOKEN=

# Slack Bot (Socket Mode)
# Create app at https://api.slack.com/apps - see docs/slack-setup.md
SLACK_BOT_TOKEN=xoxb-...
SLACK_APP_TOKEN=xapp-...

# Slack User Whitelist (optional - comma-separated user IDs)
# When set, only listed Slack users can interact with the bot
# When empty/unset, bot responds to all users
# Get user IDs: Slack profile > ... > Copy member ID
SLACK_ALLOWED_USER_IDS=U1234ABCD,W5678EFGH

# Discord User Whitelist (optional - comma-separated user IDs)
# When set, only listed Discord users can interact with the bot
# When empty/unset, bot responds to all users
# Get user IDs in Discord: Settings > Advanced > Developer Mode, then right-click user > Copy ID
DISCORD_ALLOWED_USER_IDS=123456789012345678,987654321098765432

# Telegram User Whitelist (optional - comma-separated user IDs)
# When set, only listed Telegram users can interact with the bot
# When empty/unset, bot responds to all users
# Get your user ID by messaging @userinfobot on Telegram
TELEGRAM_ALLOWED_USER_IDS=123456789,987654321

# Telegram Group Configuration (for topic-based multi-project development)
# Set this to your supergroup chat ID (negative number) to enable topic features
# Each topic becomes an isolated project workspace with its own codebase and AI session
# Example: -1003484800871
TELEGRAM_GROUP_CHAT_ID=

# Telegram Topic Filter (for preventing bot conflicts in shared groups)
# Controls which topics the bot responds to - useful when multiple bots share a group
# - 'all' (default): Respond to all topics and general chat
# - 'none': Only respond in general chat, ignore all topics
# - '123,456,789': Whitelist - only respond to listed topics (comma-separated)
# - '!123,456': Blacklist - respond to all topics EXCEPT these (comma-separated)
TELEGRAM_TOPIC_FILTER=all

# Platform Streaming Mode (stream | batch)
TELEGRAM_STREAMING_MODE=stream  # stream (default) | batch
DISCORD_STREAMING_MODE=batch    # batch (default) | stream
SLACK_STREAMING_MODE=batch      # batch (default) | stream
GITHUB_STREAMING_MODE=batch     # batch (default) | stream

# Bot Display Name (shown in batch mode "starting" message)
BOT_DISPLAY_NAME=CodingAgent      # e.g., "My-bot", "CodeBot", etc.

# GitHub Bot Mention (optional - for @mention detection in GitHub issues/PRs)
# When set, the bot will respond to this mention name instead of the default @remote-agent
# If not set, falls back to BOT_DISPLAY_NAME, then defaults to "remote-agent"
GITHUB_BOT_MENTION=remote-agent

# Optional
# WORKSPACE_PATH: Directory where cloned repositories will be stored
# RECOMMENDED: Use a path outside your project directory to avoid nested repos
# Examples:
#   - /tmp/remote-agent-workspace (temporary, auto-cleaned on reboot - Linux/Mac)
#   - ~/remote-agent-workspace (persistent in home directory - Linux/Mac)
#   - C:Users\[your-user-ID]\remote-agent-workspace (Windows)
# AVOID: ./workspace (causes repo-inside-repo when working on this project)
WORKSPACE_PATH=
PORT=3000

# Concurrency
MAX_CONCURRENT_CONVERSATIONS=10  # Maximum concurrent AI conversations (default: 10)

# Builtin Command Templates
# Set to 'false' to disable loading the maintained workflow commands
# (plan, implement, commit, review-pr, etc.) that ship with this repo.
# These are updated by the repo maintainers with each release.
LOAD_BUILTIN_COMMANDS=true  # true (default) | false

# MCP Server Configuration
# Model Context Protocol servers provide additional capabilities to Claude Code instances
# spawned by the bot. These are configured programmatically for bot-spawned instances.

# Archon MCP - Task management and project tracking
# Requires: Archon running via Docker (see https://github.com/coleam00/Archon)
# Run: git clone https://github.com/coleam00/archon.git && cd archon && docker compose up -d
# Set to 'true' to enable. Default URL is http://localhost:8051
ENABLE_ARCHON_MCP=false
ARCHON_MCP_URL=http://localhost:8051/mcp  # URL of Archon MCP HTTP endpoint (default: http://localhost:8051/mcp)
ARCHON_TOKEN=  # Optional: Token for Archon authentication

# Archon Auto-Research (Phase 2)
# Automatically detects dependencies in user prompts and indexes documentation
# Requires ENABLE_ARCHON_MCP=true to function
ARCHON_AUTO_CRAWL=false  # true | false (default)
# Crawl strategy: background | blocking | suggest
# - background: Crawl in background, don't wait, respond immediately (recommended)
# - blocking: Wait for crawl completion before responding (with timeout)
# - suggest: Ask user for permission before crawling
ARCHON_CRAWL_STRATEGY=background  # background (default) | blocking | suggest
# Maximum wait time for blocking crawls (milliseconds)
ARCHON_CRAWL_MAX_WAIT=60000  # 60 seconds (default)

# Playwright MCP - Browser automation for testing
# Set to 'true' to enable Playwright capabilities
ENABLE_PLAYWRIGHT_MCP=true

# GitHub MCP - GitHub API integration (uses GITHUB_TOKEN above)
# Set to 'true' to enable GitHub MCP capabilities
ENABLE_GITHUB_MCP=false

# Custom HTTP MCP Servers (optional)
# Format: name1:url1:header1=value1,name2:url2:header2=value2
# Example: custom:https://api.example.com/mcp:Authorization=Bearer token123
MCP_HTTP_SERVERS=

# Worktree Configuration
# Base directory where worktrees are created for GitHub issues/PRs
# Set to same value as skill's worktreeBase for symbiosis with worktree-manager skill
# Default: ${WORKSPACE_PATH}/../worktrees (sibling to workspace)
# Example for skill symbiosis: ~/tmp/worktrees
WORKTREE_BASE=

# Port Management Configuration
# Centralized port registry to prevent conflicts across worktrees and services
# Development port range (default: 8000-8999)
DEV_PORT_START=8000
DEV_PORT_END=8999

# Production port range (default: 9000-9999)
PROD_PORT_START=9000
PROD_PORT_END=9999

# Test port range (default: 7000-7999)
TEST_PORT_START=7000
TEST_PORT_END=7999

# Reserved ports (comma-separated, never auto-allocate)
# These ports are used by core services and will never be automatically assigned
RESERVED_PORTS=3000,5432,8051,8181,3737

# Auto-cleanup stale allocations on startup
PORT_AUTO_CLEANUP=true

# Port allocation strategy: sequential | random
PORT_ALLOCATION_STRATEGY=sequential
